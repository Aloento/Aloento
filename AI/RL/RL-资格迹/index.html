<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>RL-资格迹 - Aloento</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#f0f0f0"><meta name="application-name" content="Aloento"><meta name="msapplication-TileImage" content="/img/Aloento.png"><meta name="msapplication-TileColor" content="#f0f0f0"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Aloento"><meta name="apple-mobile-web-app-status-bar-style" content="default"><link rel="apple-touch-icon" sizes="72x72" href="/img/Aloento.png"><link rel="apple-touch-icon" sizes="96x96" href="/img/Aloento.png"><link rel="apple-touch-icon" sizes="128x128" href="/img/Aloento.png"><link rel="apple-touch-icon" sizes="256x256" href="/img/Aloento.png"><meta name="description" content="Eligibility Traces"><meta property="og:type" content="blog"><meta property="og:title" content="RL-资格迹"><meta property="og:url" content="https://aloen.to/AI/RL/RL-%E8%B5%84%E6%A0%BC%E8%BF%B9/"><meta property="og:site_name" content="Aloento"><meta property="og:description" content="Eligibility Traces"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://aloen.to/img/og_image.png"><meta property="article:published_time" content="2025-05-24T04:19:25.000Z"><meta property="article:modified_time" content="2025-06-13T11:47:22.977Z"><meta property="article:author" content="Aloento"><meta property="article:tag" content="笔记"><meta property="article:tag" content="AI"><meta property="article:tag" content="RL"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://aloen.to/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://aloen.to/AI/RL/RL-%E8%B5%84%E6%A0%BC%E8%BF%B9/"},"headline":"RL-资格迹","image":["https://aloen.to/img/og_image.png"],"datePublished":"2025-05-24T04:19:25.000Z","dateModified":"2025-06-13T11:47:22.977Z","author":{"@type":"Person","name":"Aloento"},"publisher":{"@type":"Organization","name":"Aloento","logo":{"@type":"ImageObject","url":"https://aloen.to/AI/RL/RL-%E8%B5%84%E6%A0%BC%E8%BF%B9/"}},"description":"Eligibility Traces"}</script><link rel="canonical" href="https://aloen.to/AI/RL/RL-%E8%B5%84%E6%A0%BC%E8%BF%B9/"><link rel="icon" href="/img/Aloento.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link data-pjax rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-light.min.css"><link rel="stylesheet" href="https://fonts.lug.ustc.edu.cn/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link data-pjax rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/1.10.0/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.8.1/css/justifiedGallery.min.css"><!--!--><!--!--><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css"><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js"></script><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Aloento</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" target="_blank" rel="noopener" href="https://Q-Audio.org/Aloento">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Q-Audio" href="https://Q-Audio.org"><i class="fas fa-compact-disc"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="MusiLand" href="https://Musi.Land/"><i class="fab fa-dashcube"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="GitHub" href="https://github.com/Aloento"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2025-05-24T04:19:25.000Z" title="5/24/2025, 4:19:25 AM">2025-05-24</time></span><span class="level-item">Updated&nbsp;<time dateTime="2025-06-13T11:47:22.977Z" title="6/13/2025, 11:47:22 AM">2025-06-13</time></span><span class="level-item"><a class="link-muted" href="/categories/AI/">AI</a><span> / </span><a class="link-muted" href="/categories/AI/RL/">RL</a></span><span class="level-item">21 minutes read (About 3080 words)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>&nbsp;visits</span></div></div><h1 class="title is-3 is-size-4-mobile">RL-资格迹</h1><div class="content"><p>Eligibility Traces</p>
<span id="more"></span>

<h1 id="核心问题"><a href="#核心问题" class="headerlink" title="核心问题"></a>核心问题</h1><p>想象你在训练一只小狗学会坐下，每次它坐下时，你都会给它奖励。但有时它做得好时你没及时奖励，等过了几秒你才给它奖励。这个“奖励延迟”就像资格迹在做的事。</p>
<p>在强化学习中，我们也会遇到这种情况：一个动作导致奖励，但这个奖励不是马上就来，而是延迟出现。资格迹的作用就是“记住”之前做过哪些状态-动作组合，以便奖励到来时，能反过来让之前的“行为”也能被更新。</p>
<h2 id="N-step-TD"><a href="#N-step-TD" class="headerlink" title="N-step TD"></a>N-step TD</h2><p>它有两个问题：</p>
<ul>
<li>延迟：需要等 n 步才能更新</li>
<li>内存：需要记录 n 步的信息才能更新</li>
</ul>
<p>我们需要优化它：与其固定用某个 n 值，不如把多个 n-step 的结果加权平均</p>
<h2 id="Compound-Update"><a href="#Compound-Update" class="headerlink" title="Compound Update"></a>Compound Update</h2><p>复合更新：</p>
<p>$$<br>\frac{1}{2} G_{t:t+2} + \frac{1}{2} G_{t:t+4}<br>$$</p>
<blockquote>
<p>用一半权重的 2 步回报（2-step return）<br>再加上一半权重的 4 步回报（4-step return）<br>把它们合起来当成“学习的目标值”</p>
</blockquote>
<ul>
<li><p>你可以混合多个不同步数的 TD 回报（甚至无限多），前提是：</p>
<ul>
<li>每个回报的权重是正的</li>
<li>所有权重加起来是 1</li>
</ul>
</li>
</ul>
<h1 id="lambda-Returns"><a href="#lambda-Returns" class="headerlink" title="$\lambda$ Returns"></a>$\lambda$ Returns</h1><p>λ-return 是 n-step return 和 compound update 的一个推广和统一表达方式。它是一种将所有 n-step return 按权重加权平均得到的更新目标。</p>
<p>$$<br>G_t^\lambda &#x3D; (1 - \lambda) \sum_{n&#x3D;1}^{\infty} \lambda^{n-1} G_{t:t+n}<br>$$</p>
<ul>
<li><p>你不只用一个固定的 n（比如 3 步）</p>
</li>
<li><p>而是把所有可能的 n 步（从 1 到 ∞）都用上</p>
</li>
<li><p>每个 n-step return 的权重是：</p>
<p>$$<br>(1 - \lambda)\lambda^{n-1}<br>$$</p>
</li>
<li><p>权重总和为 1（图右下角有 ∑ &#x3D; 1）</p>
</li>
</ul>
<p>你可以通过 λ 来控制是更偏向“短期”还是“长期”：</p>
<table>
<thead>
<tr>
<th>λ 的值</th>
<th>结果</th>
</tr>
</thead>
<tbody><tr>
<td>λ &#x3D; 0</td>
<td>完全使用 1-step TD（TD(0)）</td>
</tr>
<tr>
<td>λ &#x3D; 1</td>
<td>退化为 Monte Carlo（全轨迹回报）</td>
</tr>
<tr>
<td>0 &lt; λ &lt; 1</td>
<td>同时结合了短期和长期的优点</td>
</tr>
</tbody></table>
<blockquote>
<p>λ-return 就是用 λ 这个参数，把所有 n-step 回报“平均融合”起来，既能快速更新（TD 风格），又能利用长远信息（MC 风格）。</p>
</blockquote>
<h2 id="离线"><a href="#离线" class="headerlink" title="离线"></a>离线</h2><p>Off-line λ-return algorithm：</p>
<p>$$<br>\mathbf{w}_{t+1} &#x3D; \mathbf{w}_t + \alpha \left[ G_t^\lambda - \hat{v}(S_t, \mathbf{w}_t) \right] \nabla \hat{v}(S_t, \mathbf{w}_t)<br>$$</p>
<ul>
<li>$\mathbf{w}_t$：当前的权重向量（比如神经网络的参数）</li>
<li>$G_t^\lambda$：我们前几页讲的 λ-return，作为目标值</li>
<li>$\hat{v}(S_t, \mathbf{w}_t)$：当前估计值（对状态 $S_t$ 的预测）</li>
<li>$\alpha$：学习率（步长）</li>
<li>$\nabla \hat{v}(S_t, \mathbf{w}_t)$：对当前权重的梯度</li>
</ul>
<blockquote>
<p>用 λ-return 和当前估计值的误差，乘上梯度，来更新权重。<br>离线版本，要等到整个 episode 跑完，才能计算 λ-return 和更新参数。</p>
</blockquote>
<ul>
<li>λ-return 比 n-step TD 整体表现更稳定，误差也更低</li>
<li>n-step TD 的表现对 n 非常敏感</li>
</ul>
<h2 id="前向视角"><a href="#前向视角" class="headerlink" title="前向视角"></a>前向视角</h2><p>Forward View 是一种“理论上的思考方式”：当我们在某个状态 $S_t$ 的时候，去“向前看”它未来可能得到的所有奖励，并决定如何组合这些奖励来估算当前状态的价值。</p>
<p>在 λ-return 中，我们正是根据这个 forward view 来构造回报的：</p>
<ul>
<li>比如 1-step 回报，只看一步</li>
<li>2-step 回报，看两步</li>
<li>…</li>
<li>最终的 λ-return，就是把所有这些 n-step 回报加权平均，形成一个“综合未来”的看法</li>
</ul>
<p>所以 λ-return 就是用 forward view 把未来奖励按比例融合，从而评估当前状态的价值。虽然 forward view 的思想很清晰，但实际做不到“真的看到未来”。</p>
<h1 id="资格迹"><a href="#资格迹" class="headerlink" title="资格迹"></a>资格迹</h1><p>正因如此，我们需要 Eligibility Traces 来帮助我们，它是一种短期记忆机制，用来记录过去哪些状态或特征“有资格”被更新。</p>
<ul>
<li><code>zₜ</code> 是资格迹向量：</li>
<li>它的大小（维度）和 <code>wₜ</code>（权重向量）一样</li>
<li>每一个分量表示：这个特征最近出现过多少、重要程度是多少</li>
</ul>
<table>
<thead>
<tr>
<th>记忆种类</th>
<th>变量</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>长期记忆</td>
<td><code>wₜ</code></td>
<td>学到的“经验总结”，整个系统生命周期不断积累</td>
</tr>
<tr>
<td>短期记忆（资格迹）</td>
<td><code>zₜ</code></td>
<td>记录“最近的经历”，在 episode 期间慢慢消失</td>
</tr>
</tbody></table>
<ul>
<li><code>wₜ</code> 是你脑子里学会的技能</li>
<li><code>zₜ</code> 是你刚练过的动作——现在还热着，值得给它更多学习信号</li>
</ul>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Eligibility trace zₜ</span><br><span class="line">        ↓（影响）</span><br><span class="line">Weight vector wₜ</span><br><span class="line">        ↓（决定）</span><br><span class="line">Estimated value vₜ</span><br></pre></td></tr></table></figure>

<p>即：资格迹影响权重向量的更新，而权重向量决定我们对当前状态价值的估计。</p>
<h2 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h2><p>在每个 episode 的开始，资格迹向量 <code>z₋₁</code> 会被设为 0。</p>
<p>$$<br>\mathbf{z}_{-1} &#x3D; 0<br>$$</p>
<p>我们刚开始时没有任何记忆。</p>
<ul>
<li>每一步的更新公式</li>
</ul>
<div>
$$
\mathbf{z}_t = \gamma \lambda \mathbf{z}_{t-1} + \nabla \hat{v}(S_t, \mathbf{w}_t)
$$
</div>

<ul>
<li>资格迹 &#x3D; 上一时刻的资格迹 × 衰减系数（γλ） + 当前的梯度</li>
</ul>
<p>每一步：</p>
<ul>
<li>旧的资格迹会逐渐衰减（靠 λ 控制）</li>
<li>同时又会加入当前新的特征或状态的影响</li>
</ul>
<p>在线性函数逼近的情况下，这个梯度就是当前状态的特征向量 $\nabla \hat{v}(S_t, \mathbf{w}_t) &#x3D; \mathbf{x}_t$。</p>
<h2 id="权重"><a href="#权重" class="headerlink" title="权重"></a>权重</h2><p>资格迹 <code>zₜ</code> 决定了“权重向量 <code>wₜ</code> 中哪些部分最近参与过”，也就是说：</p>
<ul>
<li>如果某个特征最近经常出现，它的 <code>zₜ</code> 值就大</li>
<li>它就更“有资格”在这一步被强化学习到</li>
</ul>
<p>可能触发学习（reinforcing）的事件是：</p>
<p>$$<br>\delta_t &#x3D; R_{t+1} + \gamma \hat{v}(S_{t+1}, \mathbf{w}_t) - \hat{v}(S_t, \mathbf{w}_t)<br>$$</p>
<p>这个叫做 TD 误差（Temporal Difference error）<br>表示“实际获得的奖励 + 下一步的预测值” 和 “当前预测值”之间的差异。</p>
<ul>
<li>如果差值大，说明我们预测错了，应该调整权重</li>
</ul>
<p>权重更新公式：</p>
<p>$$<br>\mathbf{w}_{t+1} &#x3D; \mathbf{w}_t + \alpha , \delta_t , \mathbf{z}_t<br>$$</p>
<p>解释：</p>
<ul>
<li>学习率 <code>α</code> 控制更新步长</li>
<li>更新方向取决于资格迹 <code>zₜ</code>（表示最近谁参与过）</li>
<li>更新幅度取决于 TD 误差 <code>δₜ</code>（预测偏差）</li>
</ul>
<p>谁最近出现得多（zₜ 大），谁在这一步预测错得多（δₜ 大），谁就被多更新。</p>
<h2 id="后向视角"><a href="#后向视角" class="headerlink" title="后向视角"></a>后向视角</h2><p>Backward View 是实际实现 TD(λ) 的核心方法。在实际训练时，我们没法“看到未来”，所以从现在往回看过去的状态。</p>
<ol>
<li><p>每次更新使用当前的 TD 误差 δₜ</p>
<p>$$<br>\delta_t &#x3D; R_{t+1} + \gamma \hat{v}(S_{t+1}) - \hat{v}(S_t)<br>$$</p>
<p>但重点是我们不只用它来更新当前状态，而是用它乘以资格迹 z，来更新“所有参与过的状态”。</p>
</li>
<li><p>资格迹帮助我们“向后分配误差”</p>
<ul>
<li>从 $S_t$ 开始，向过去的状态 $S_{t-1}, S_{t-2}, \dots$ 发出“更新信号”</li>
<li>谁之前参与得多（资格迹 $z$ 大），谁就被更新得多</li>
</ul>
</li>
</ol>
<p>TD(λ) 是向后看的算法：每一时刻我们根据当前的 TD 误差，把它按资格迹的大小分配给之前的状态。</p>
<h2 id="n-步截断"><a href="#n-步截断" class="headerlink" title="n 步截断"></a>n 步截断</h2><p>一个很常用的近似技巧 n-step truncated λ-return：</p>
<ol>
<li><p>理想情况：off-line λ-return 很好，但实际很难用</p>
<ul>
<li>离线 λ-return 需要整条轨迹结束后才能计算出回报</li>
<li>所以只能在 episodic（有终点）任务中使用</li>
<li>而且得等到 episode 结束才能更新，不适合在线学习或长期任务</li>
</ul>
</li>
<li><p>在持续任务中，λ-return 根本没法完整知道，因为它需要看无限多个 n-step 回报：</p>
<ul>
<li>比如：状态永远不会终止（比如一个机器人一直在走）</li>
<li>那你就永远算不出完整的 λ-return</li>
</ul>
</li>
<li><p>但远处的回报影响也会变弱</p>
<ul>
<li>因为 λ-return 是指数衰减的（权重是 λⁿ），所以离当前状态太远的奖励，影响本来也不大，可以忽略它们</li>
</ul>
</li>
<li><p>所以我们做一个近似处理：截断</p>
<ul>
<li>只计算前 n 步的 λ-return，忽略后面很小的部分，即“只保留前几步”。</li>
</ul>
</li>
</ol>
<p>截断版本的 λ-return 适用于 online 学习</p>
<p>$$<br>G_{t:h}^\lambda &#x3D; (1 - \lambda) \sum_{n&#x3D;1}^{h - t} \lambda^n G_{t:t+n} + \lambda^{h - t} G_{t:h}^1<br>$$</p>
<ul>
<li>我们不看直到终点，而是只看到一个有限时间点 h</li>
<li>把 n-step 回报截断到 $n &#x3D; h - t$，即“从时间 $t$ 往后看 $h - t$ 步”</li>
<li>最后那一项是截断时的 n-step return，作为“最终估值”</li>
</ul>
<h1 id="Online-λ-return"><a href="#Online-λ-return" class="headerlink" title="Online λ-return"></a>Online λ-return</h1><ol>
<li><p>截断参数 $n$ 的权衡（Tradeoff）</p>
<p>我们之前讲了，n-step truncated λ-return 是对完整 λ-return 的近似，那么：</p>
<ul>
<li><p>大 n：</p>
<ul>
<li>越接近完整 λ-return</li>
<li>越准确，但更新要等更久才能做（延迟）</li>
</ul>
</li>
<li><p>小 n：</p>
<ul>
<li>能更快做出更新（实时）</li>
<li>但信息不够完整，更新不够准</li>
</ul>
</li>
</ul>
</li>
<li><p>能不能两者兼得？</p>
<ul>
<li>像离线 λ-return 一样准确</li>
<li>又想像在线更新一样快速响应</li>
</ul>
<p>这个办法就是：每来一个新数据，就重新计算之前所有的更新</p>
<ul>
<li>每一个时间步，新的奖励或状态被观察到</li>
<li>从 episode 开始到现在，把之前所有时间点的 λ-return 重新计算一遍</li>
<li>因为现在有更多信息了，所以之前的更新也可以做得更准确</li>
</ul>
</li>
</ol>
<div>
$$
\mathbf{w}_{t+1} = \mathbf{w}_t + \alpha \left[ G_{t:h}^\lambda - \hat{v}(S_t, \mathbf{w}_t) \right] \nabla \hat{v}(S_t, \mathbf{w}_t)
$$
</div>

<p>当前的权重向量 $\mathbf{w}_t$ 用 λ-return（截断版）和当前估计的差值（TD 误差）乘以梯度进行更新。</p>
<ul>
<li>$G_{t:h}^\lambda$：是 n-step 截断的 λ-return</li>
<li>$\nabla \hat{v}(S_t, \mathbf{w}_t)$：是当前状态的梯度（特征向量）</li>
<li>$\alpha$：学习率</li>
</ul>
<p>假设你现在在第 5 步，得到了 $R_5$，那你就可以：</p>
<ul>
<li>回头把第 0 步到第 4 步的 λ-return 再算一遍（因为现在知道更远的奖励了）</li>
<li>然后用这些新算出来的 λ-return 来重新更新它们的权重</li>
<li>计算开销大，每一步都要重新计算所有之前的 λ-return 并更新权重。</li>
</ul>
<h2 id="True-Online-TD-λ"><a href="#True-Online-TD-λ" class="headerlink" title="True Online TD(λ)"></a>True Online TD(λ)</h2><p>真正可行、效率高的实现方法</p>
<ul>
<li>保留 λ-return 的精度和理论基础</li>
<li>又实现像 backward view 那样高效的更新</li>
<li>通过资格迹 zₜ 来实现递推式计算</li>
</ul>
<p>所以我们有：</p>
<ol>
<li><p>线性逼近形式：</p>
<p>$$<br>\hat{v}(s, \mathbf{w}) &#x3D; \mathbf{w}^\top \mathbf{x}(s)<br>$$</p>
<p>我们用一个向量 <code>x(s)</code> 表示状态的特征，估值就是用权重 <code>w</code> 点乘它。<br>这是强化学习中最常用的函数逼近形式。</p>
</li>
<li><p>权重更新公式：</p>
<div>
$$
\mathbf{w}_{t+1} = \mathbf{w}_t + \alpha \delta_t \mathbf{z}_t + \alpha \left( \mathbf{w}   _t^\top \mathbf{x}_t - \mathbf{w}_{t-1}^\top \mathbf{x}_t \right) \left( \mathbf{z}_t -   \mathbf{x}_t \right)
$$
</div>

<ul>
<li><p><code>δₜ</code> 是 TD 误差：</p>
<p>$$<br>\delta_t &#x3D; R_{t+1} + \gamma \hat{v}(S_{t+1}) - \hat{v}(S_t)<br>$$</p>
</li>
<li><p><code>zₜ</code> 是资格迹向量</p>
</li>
<li><p>第二项是修正项，用于让更新过程严格等价于 λ-return，让我们不需要重新回顾所有时间步，也能“忠实”模拟完 整 λ-return 的更新效果</p>
</li>
</ul>
</li>
<li><p>资格迹更新公式（Dutch trace）</p>
<div>
$$
\mathbf{z}_t = \gamma \lambda \mathbf{z}_{t-1} + \left(1 - \alpha \gamma \lambda \mathbf{z}_    {t-1}^\top \mathbf{x}_t \right) \mathbf{x}_t
$$
</div>

<p>加入了一个修正系数，Dutch trace，它能更好地保持数值稳定性和理论等价性，是 True Online TD(λ) 独有的更 新方式。</p>
</li>
</ol>
</div><div class="article-licensing box"><div class="licensing-title"><p>RL-资格迹</p><p><a href="https://aloen.to/AI/RL/RL-资格迹/">https://aloen.to/AI/RL/RL-资格迹/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>Aloento</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2025-05-24</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2025-06-13</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a><a class="" rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/%E7%AC%94%E8%AE%B0/">笔记</a><a class="link-muted mr-2" rel="tag" href="/tags/AI/">AI</a><a class="link-muted mr-2" rel="tag" href="/tags/RL/">RL</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/AI/RL/RL-Endterm/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">RL-Endterm</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/Algorithm/DAA-Endterm/"><span class="level-item">DAA Endterm</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/Aloento.png" alt="Aloento"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Aloento</p><p class="is-size-6 is-block">Reindeer</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Foot of Sacred Mountain</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives/"><p class="title">71</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories/"><p class="title">21</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags/"><p class="title">37</p></a></div></div></nav></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/AI/"><span class="level-start"><span class="level-item">AI</span></span><span class="level-end"><span class="level-item tag">40</span></span></a><ul><li><a class="level is-mobile" href="/categories/AI/CogSci/"><span class="level-start"><span class="level-item">CogSci</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/AI/NLP/"><span class="level-start"><span class="level-item">NLP</span></span><span class="level-end"><span class="level-item tag">30</span></span></a></li><li><a class="level is-mobile" href="/categories/AI/RL/"><span class="level-start"><span class="level-item">RL</span></span><span class="level-end"><span class="level-item tag">9</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Algorithm/"><span class="level-start"><span class="level-item">Algorithm</span></span><span class="level-end"><span class="level-item tag">9</span></span></a><ul><li><a class="level is-mobile" href="/categories/Algorithm/TM/"><span class="level-start"><span class="level-item">TM</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Cloud/"><span class="level-start"><span class="level-item">Cloud</span></span><span class="level-end"><span class="level-item tag">2</span></span></a><ul><li><a class="level is-mobile" href="/categories/Cloud/OpenStack/"><span class="level-start"><span class="level-item">OpenStack</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Data-Science/"><span class="level-start"><span class="level-item">Data Science</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/Database/"><span class="level-start"><span class="level-item">Database</span></span><span class="level-end"><span class="level-item tag">2</span></span></a><ul><li><a class="level is-mobile" href="/categories/Database/MSSQL/"><span class="level-start"><span class="level-item">MSSQL</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Database/Theory/"><span class="level-start"><span class="level-item">Theory</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Math/"><span class="level-start"><span class="level-item">Math</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/Math/Logic/"><span class="level-start"><span class="level-item">Logic</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Math/Matlab/"><span class="level-start"><span class="level-item">Matlab</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Memo/"><span class="level-start"><span class="level-item">Memo</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/Program/"><span class="level-start"><span class="level-item">Program</span></span><span class="level-end"><span class="level-item tag">5</span></span></a><ul><li><a class="level is-mobile" href="/categories/Program/C/"><span class="level-start"><span class="level-item">C++</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/Program/C/CLI/"><span class="level-start"><span class="level-item">CLI</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Program/Python/"><span class="level-start"><span class="level-item">Python</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Program/WebCodecs/"><span class="level-start"><span class="level-item">WebCodecs</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/NET/"><span class="tag">.NET</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AI/"><span class="tag">AI</span><span class="tag">39</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C#</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C++</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CLI/"><span class="tag">CLI</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/JS/"><span class="tag">JS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java/"><span class="tag">Java</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LINQ/"><span class="tag">LINQ</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Matplotlib/"><span class="tag">Matplotlib</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/NLP/"><span class="tag">NLP</span><span class="tag">30</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OpenStack/"><span class="tag">OpenStack</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RL/"><span class="tag">RL</span><span class="tag">9</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SQL/"><span class="tag">SQL</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/SQLServer/"><span class="tag">SQLServer</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/WebCodecs/"><span class="tag">WebCodecs</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%B9%A0%E9%A2%98/"><span class="tag">习题</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BA%91/"><span class="tag">云</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%89%8D%E7%AB%AF/"><span class="tag">前端</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8A%A0%E5%AF%86%E8%B4%A7%E5%B8%81/"><span class="tag">加密货币</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8C%88%E7%89%99%E5%88%A9/"><span class="tag">匈牙利</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%9B%BE%E7%81%B5%E6%9C%BA/"><span class="tag">图灵机</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%94%BB%E7%95%A5/"><span class="tag">攻略</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E5%80%BC%E6%96%B9%E6%B3%95/"><span class="tag">数值方法</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E5%AD%A6/"><span class="tag">数学</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="tag">数据库</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6/"><span class="tag">数据科学</span><span class="tag">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%95%99%E5%AD%A6/"><span class="tag">留学</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%AC%94%E8%AE%B0/"><span class="tag">笔记</span><span class="tag">54</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%AE%97%E6%B3%95/"><span class="tag">算法</span><span class="tag">6</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BC%96%E7%A8%8B/"><span class="tag">编程</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BF%BB%E8%AF%91/"><span class="tag">翻译</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%80%83%E8%AF%95/"><span class="tag">考试</span><span class="tag">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%A4%E7%9F%A5%E7%A7%91%E5%AD%A6/"><span class="tag">认知科学</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%80%BB%E8%BE%91/"><span class="tag">逻辑</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9D%A2%E8%AF%95/"><span class="tag">面试</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9F%B3%E8%A7%86%E9%A2%91/"><span class="tag">音视频</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://Q-Audio.org" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Q-Audio</span></span><span class="level-right"><span class="level-item tag">q-audio.org</span></span></a></li><li><a class="level is-mobile" href="https://Musi.Land" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">MusiLand</span></span><span class="level-right"><span class="level-item tag">musi.land</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><li><a class="level is-mobile" href="#核心问题"><span class="level-left"><span class="level-item">1</span><span class="level-item">核心问题</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#N-step-TD"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">N-step TD</span></span></a></li><li><a class="level is-mobile" href="#Compound-Update"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">Compound Update</span></span></a></li></ul></li><li><a class="level is-mobile" href="#lambda-Returns"><span class="level-left"><span class="level-item">2</span><span class="level-item">$\lambda$ Returns</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#离线"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">离线</span></span></a></li><li><a class="level is-mobile" href="#前向视角"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">前向视角</span></span></a></li></ul></li><li><a class="level is-mobile" href="#资格迹"><span class="level-left"><span class="level-item">3</span><span class="level-item">资格迹</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#更新"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">更新</span></span></a></li><li><a class="level is-mobile" href="#权重"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">权重</span></span></a></li><li><a class="level is-mobile" href="#后向视角"><span class="level-left"><span class="level-item">3.3</span><span class="level-item">后向视角</span></span></a></li><li><a class="level is-mobile" href="#n-步截断"><span class="level-left"><span class="level-item">3.4</span><span class="level-item">n 步截断</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Online-λ-return"><span class="level-left"><span class="level-item">4</span><span class="level-item">Online λ-return</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#True-Online-TD-λ"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">True Online TD(λ)</span></span></a></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-06-03T07:57:14.000Z">2025-06-03</time></p><p class="title"><a href="/Memo/K%E7%BA%BF%E5%BD%A2%E6%80%81/">K线形态</a></p><p class="categories"><a href="/categories/Memo/">Memo</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-06-01T09:58:41.000Z">2025-06-01</time></p><p class="title"><a href="/Memo/%E9%87%8F%E5%8C%96%E6%97%A5%E8%AE%B0/">量化日记</a></p><p class="categories"><a href="/categories/Memo/">Memo</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-05-24T08:50:53.000Z">2025-05-24</time></p><p class="title"><a href="/AI/RL/RL-Endterm/">RL-Endterm</a></p><p class="categories"><a href="/categories/AI/">AI</a> / <a href="/categories/AI/RL/">RL</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-05-24T04:19:25.000Z">2025-05-24</time></p><p class="title"><a href="/AI/RL/RL-%E8%B5%84%E6%A0%BC%E8%BF%B9/">RL-资格迹</a></p><p class="categories"><a href="/categories/AI/">AI</a> / <a href="/categories/AI/RL/">RL</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-05-07T02:15:33.000Z">2025-05-07</time></p><p class="title"><a href="/Algorithm/DAA-Endterm/">DAA Endterm</a></p><p class="categories"><a href="/categories/Algorithm/">Algorithm</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2025/06/"><span class="level-start"><span class="level-item">June 2025</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/05/"><span class="level-start"><span class="level-item">May 2025</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/04/"><span class="level-start"><span class="level-item">April 2025</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/03/"><span class="level-start"><span class="level-item">March 2025</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/02/"><span class="level-start"><span class="level-item">February 2025</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/12/"><span class="level-start"><span class="level-item">December 2024</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/11/"><span class="level-start"><span class="level-item">November 2024</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/10/"><span class="level-start"><span class="level-item">October 2024</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/09/"><span class="level-start"><span class="level-item">September 2024</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/08/"><span class="level-start"><span class="level-item">August 2024</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/03/"><span class="level-start"><span class="level-item">March 2024</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/02/"><span class="level-start"><span class="level-item">February 2024</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/12/"><span class="level-start"><span class="level-item">December 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/10/"><span class="level-start"><span class="level-item">October 2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/12/"><span class="level-start"><span class="level-item">December 2022</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/11/"><span class="level-start"><span class="level-item">November 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/06/"><span class="level-start"><span class="level-item">June 2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/04/"><span class="level-start"><span class="level-item">April 2022</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/12/"><span class="level-start"><span class="level-item">December 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><p class="is-size-7"><span>&copy; 2025 Aloento</span><br><span id="busuanzi_container_site_uv">Visited by <span id="busuanzi_value_site_uv">0</span> users</span></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Q-Audio" href="https://Q-Audio.org"><i class="fas fa-compact-disc"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="MusiLand" href="https://Musi.Land/"><i class="fab fa-dashcube"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="GitHub" href="https://github.com/Aloento"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><!--!--><script src="https://cdnjs.cloudflare.com/ajax/libs/lightgallery/1.10.0/js/lightgallery.min.js" defer></script><script src="https://cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><script type="text/javascript" id="MathJax-script" async>MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      },
      svg: {
        fontCache: 'global'
      },
      chtml: {
        matchFontHeight: false
      }
    };</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.15.1/katex.min.css"><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.15.1/katex.min.js" defer></script><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.15.1/contrib/auto-render.min.js" defer></script><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.15.1/contrib/mhchem.min.js" defer></script><script>window.addEventListener("load", function() {
            document.querySelectorAll('[role="article"] > .content').forEach(function(element) {
                renderMathInElement(element);
            });
        });</script><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">×</a></p></div><script src="https://cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><!--!--><script data-pjax src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script data-pjax src="/js/insight.js" defer></script><script data-pjax>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>